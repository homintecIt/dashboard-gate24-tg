<!-- recharges-list.component.html -->
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="page-title-box d-sm-flex align-items-center justify-content-between">
        <h4 class="mb-sm-0">Liste des Recharges</h4>
        <div class="page-title-right">
          <ol class="breadcrumb m-0">
            <li class="breadcrumb-item"><a routerLink="/dashboard">Accueil</a></li>
            <li class="breadcrumb-item active">Recharges</li>
          </ol>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="card-title mb-0">Détails des Recharges</h5>
          <div class="d-flex align-items-center gap-3">
            <button
              class="btn btn-outline-primary"
              (click)="refreshData()"
              [disabled]="loading"
            >
              <i class="fas fa-sync" [class.fa-spin]="loading">Rafraichir</i>
            </button>
            <input
              type="text"
              class="form-control me-2"
              placeholder="Rechercher..."
              (input)="onSearch($event)"
            >

          </div>
        </div>

        <div class="card-body">
          <!-- Tableau de recharges -->
          <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>N°</th>
                  <th>N° Compte</th>
                  <th>Site</th>
                  <th>Percepteur</th>
                  <th>Montant</th>
                  <th>Avant Recharge</th>
                  <th>Après Recharge</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let recharge of filteredRecharges; let i = index">
                  <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
                  <td>{{ recharge.compte.accountNumber }}</td>
                  <td>{{ recharge.site }}</td>
                  <td>{{ recharge.percepteur }}</td>
                  <td>{{ recharge.montant }}</td>
                  <td>{{ recharge.montant_avant_recharge }}</td>
                  <td>{{ recharge.montant_apres_recharge }}</td>
                  <td>{{ recharge.created_at | date:'short' }}</td>
                </tr>
              </tbody>
            </table>
          </div>

           <!-- Pagination -->
           <div class="d-flex justify-content-between align-items-center mt-3">
            <div>
              Affichage {{ (currentPage - 1) * itemsPerPage + 1 }} à
              {{
                currentPage * itemsPerPage > totalItems
                  ? totalItems
                  : currentPage * itemsPerPage
              }}
              sur {{ totalItems }} entrées
            </div>
           <nav *ngIf="totalPages > 1" aria-label="Navigation des pages">
            <ul class="pagination justify-content-center">
              <!-- Bouton précédent -->
              <li class="page-item" [class.disabled]="currentPage === 1">
                <a class="page-link" (click)="goToPage(currentPage - 1)" role="button">
                  Précédent
                </a>
              </li>

              <!-- Pages -->
              <ng-container *ngFor="let page of getPagesArray()">
                <li *ngIf="page === -1" class="page-item disabled">
                  <span class="page-link">...</span>
                </li>
                <li *ngIf="page !== -1"
                    class="page-item"
                    [class.active]="page === currentPage">
                  <a class="page-link" (click)="goToPage(page)" role="button">
                    {{ page }}
                  </a>
                </li>
              </ng-container>

              <!-- Bouton suivant -->
              <li class="page-item" [class.disabled]="currentPage === totalPages">
                <a class="page-link" (click)="goToPage(currentPage + 1)" role="button">
                  Suivant
                </a>
              </li>
            </ul>
          </nav>
           </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- <div class="d-flex justify-content-between align-items-center mt-3">
  <div>
    Affichage {{ (currentPage - 1) * itemsPerPage + 1 }} à
    {{
      currentPage * itemsPerPage > totalItems
        ? totalItems
        : currentPage * itemsPerPage
    }}
    sur {{ totalItems }} entrées
  </div> -->
