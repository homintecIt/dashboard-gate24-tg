<div class="row">
  <div class="col-12">
    <div
      class="page-title-box d-sm-flex align-items-center justify-content-between"
    >
      <h4 class="mb-sm-0">Liste des clients</h4>

      <div class="page-title-right">
        <ol class="breadcrumb m-0">
          <li class="breadcrumb-item">
            <a routerLink="/dashboard">Accueil</a>
          </li>
          <li class="breadcrumb-item active">Liste des clients</li>
        </ol>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col">
    <div class="card">
      <div class="card-header d-flex">
        <h5 class="card-title mb-0">Liste des clients</h5>
        <div class="row">
          <div class="col-md-12 col-12 text-md-end text-sm-start">
            <input
              type="text"
              class="form-control"
              placeholder="Rechercher un client..."
              (input)="onSearchChange($event)"
            />
          </div>
        </div>
      </div>

      <div class="card-body">
        <div class="row">
          <div class="table-responsive">
            <table class="table table-striped table-bordered">
              <thead class="thead-dark">
                <tr>
                  <th>#</th>
                  <th>Nom</th>
                  <th>Prénom</th>
                  <th>Email</th>
                  <th>Téléphone</th>
                  <th>Adresse</th>
                  <th>CIN</th>
                  <th>Date de création</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of data; let i = index">
                  <td>{{ i + 1 + (currentPage - 1) * itemsPerPage }}</td>
                  <td>{{ item.nom }}</td>
                  <td>{{ item.prenom }}</td>
                  <td>{{ item.email }}</td>
                  <td>{{ item.tel }}</td>
                  <td>{{ item.adresse }}</td>
                  <td>{{ item.cin }}</td>
                  <td>{{ item.created_at | date : "short" }}</td>
                  <td class="d-flex justify-content-between">
                    <a href="" class=""
                      ><i class="fs-3 ri-eye-line text-primary"></i
                    ></a>
                    <a href="" class=""
                      ><i class="mt-2 las la-eye-dropper text-success fs-4"></i
                    ></a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <nav *ngIf="totalItems > itemsPerPage" class="mt-3">
            <ul class="pagination justify-content-end">
              <li
                class="page-item"
                [class.disabled]="currentPage === 1"
                (click)="currentPage > 1 && onPageChange(currentPage - 1)"
              >
                <span class="page-link">Précédent</span>
              </li>
              <li
                class="page-item"
                *ngFor="let page of getPageNumbers(); let idx = index"
                [class.active]="currentPage === page"
                (click)="onPageChange(page)"
              >
                <span class="page-link">{{ page }}</span>
              </li>
              <li
                class="page-item"
                [class.disabled]="
                  currentPage === Math.ceil(totalItems / itemsPerPage)
                "
                (click)="
                  currentPage < Math.ceil(totalItems / itemsPerPage) &&
                    onPageChange(currentPage + 1)
                "
              >
                <span class="page-link">Suivant</span>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="isLoading" class="text-center my-4">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Chargement...</span>
  </div>
</div>
