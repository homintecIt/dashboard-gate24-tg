<div class="row">
  <div class="col-12">
    <div
      class="page-title-box d-sm-flex align-items-center justify-content-between"
    >
      <h4 class="mb-sm-0">Liste des clients</h4>

      <div class="page-title-right">
        <ol class="breadcrumb m-0">
          <li class="breadcrumb-item">
            <a routerLink="/dashboard">Accueil</a>
          </li>
          <li class="breadcrumb-item active">Liste des clients</li>
        </ol>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col">
    <div class="card">
      <div
        class="card-header d-flex align-items-center justify-content-between"
      >
        <h5 class="card-title mb-0">Liste des clients</h5>
          <input
          type="text"
          class="form-control w-25"
          placeholder="Rechercher un client..."
          (input)="onSearchChange($event)"
        />
      </div>

      <div class="card-body">
        <!-- Loader -->
        <div
          class="d-flex justify-content-center align-items-center"
          *ngIf="paginatedClients.length === 0"
        >
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Chargement...</span>
          </div>
        </div>

        <!-- Table -->
        <div class="table-responsive" *ngIf="paginatedClients.length > 0">
          <table class="table table-striped table-bordered">
            <thead class="thead-dark">
              <tr>
                <th class="text-center"  >#</th>
                <th class="text-center"  >Nom</th>
                <th class="text-center"  >Prénom</th>
                <th class="text-center"  >Email</th>
                <th class="text-center"  >Téléphone</th>
                <th class="text-center"  >Adresse</th>
                <th class="text-center"  >CIN</th>
                <th class="text-center"  >Date de création</th>
                <th class="text-center"  >Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of paginatedClients; let i = index">
                <td class="text-center" >{{ i + 1 + (currentPage - 1) * itemsPerPage }}</td>
                <td class="text-center"  >{{ item.nom }}</td>
                <td class="text-center"  >{{ item.prenom }}</td>
                <td class="text-center" >{{ item.email }}</td>
                <td class="text-center" >{{ item.tel }}</td>
                <td class="text-center" >{{ item.adresse }}</td>
                <td class="text-center" >{{ item.cin }}</td>
                <td class="text-center" >{{ item.created_at | date : "short" }}</td>
                <td class="d-flex justify-content-center">
                  <a href="" class="text-primary">
                    <i class=" ri-eye-line fs-4 text-secondary"></i>
                  </a>
                  <a (click)="openEditModal(item)" href="Javascript:void(0);" class="text-success">
                    <i class="ri-edit-box-line fs-4 text-info"></i>                  </a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Message si aucun client -->
        <!-- <div class="alert alert-info text-center" *ngIf="paginatedClients.length === 0">
          Aucun client trouvé.
        </div> -->

        <!-- Pagination -->
        <nav *ngIf="totalItems > itemsPerPage">
          <ul class="pagination justify-content-end">
            <!-- Bouton Précédent -->
            <li
              class="page-item"
              [class.disabled]="currentPage === 1"
              (click)="onPageChange(currentPage - 1)"
            >
              <button class="page-link">Précédent</button>
            </li>

            <!-- Numéros des pages -->
            <li
              class="page-item"
              *ngFor="let page of getPageNumbers()"
              [class.active]="currentPage === page"
              (click)="onPageChange(page)"
            >
              <button class="page-link">{{ page }}</button>
            </li>

            <!-- Bouton Suivant -->
            <li
              class="page-item"
              [class.disabled]="currentPage === totalPages"
              (click)="onPageChange(currentPage + 1)"
            >
              <button class="page-link">Suivant</button>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>
